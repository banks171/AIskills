# 原则确认机制

> 通用的原则确认方法论，不包含具体项目原则

---

## 原则存储位置

**原则不在 skill 中存储**，而是存储在项目的 L1-L4 文档体系中：

| 层级 | 原则存储位置 | 说明 |
|------|-------------|------|
| L1 | `docs/system_overview.md` | 系统级原则 |
| L2 | `docs/{模块}/README.md` | 模块级原则 |
| L3 | `docs/{模块}/{技术}.md` | 技术级原则 |
| L4 | `docs/{模块}/{子目录}/*.md` | 详设级原则 |

---

## 原则标注方法

在文档中使用 HTML 注释标注已确认的原则：

```markdown
<!-- CONFIRMED: YYYY-MM-DD 确认要点简述 -->
| # | 原则 | 定义 | 实践 |
|---|------|------|------|
| 1 | 原则名 | 一句话定义 | 具体实践 |
```

---

## 新增/修改原则确认模板

当需要新增或修改原则时，必须使用以下格式请求确认：

```markdown
## 🔔 原则确认请求

### 变更内容
- **操作**：新增 / 修改 / 删除
- **层级**：L1 / L2 / L3 / L4
- **所属文档**：{文档路径}
- **原则名**：{原则名称}
- **定义**：{一句话定义}
- **实践**：{具体实践举例}

### 必要性分析
- **问题**：{当前存在什么问题导致需要这个原则}
- **目标**：{这个原则要达成什么目标}
- **影响范围**：{会影响哪些文档/代码}

### 备选方案
| 方案 | 优点 | 缺点 | 推荐度 |
|------|------|------|--------|
| 方案A（推荐） | ... | ... | ⭐⭐⭐ |
| 方案B | ... | ... | ⭐⭐ |
| 不变更 | ... | ... | ⭐ |

### 请确认
- [ ] 同意变更
- [ ] 选择备选方案：____
- [ ] 需要更多信息
```

---

## 原则冲突处理

当新原则与已确认原则冲突时：

1. **明确标注冲突**：说明新原则与哪个已确认原则冲突
2. **提供解决方案**：
   - 替换：用新原则替代旧原则
   - 限定：限定各原则的适用范围
   - 合并：合并为更通用的原则
3. **必须重新确认**：冲突解决方案需用户明确确认

---

## 原则继承规则

| 层级关系 | 继承规则 |
|---------|---------|
| L1 → L2 | L2 原则不得与 L1 原则冲突 |
| L2 → L3 | L3 可细化 L2 原则，不得违反 |
| L3 → L4 | L4 是 L3 原则的具体实现 |

---

## 查找已确认原则

1. 使用 grep 搜索 `CONFIRMED` 标注：
   ```bash
   grep -r "CONFIRMED" docs/
   ```
2. 阅读相关层级的文档
3. 新原则需检查与已有原则的兼容性
